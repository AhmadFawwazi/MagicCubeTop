<html lang="en">
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- grafik -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <link rel="stylesheet" href="cubec.css">
  <title>CubeAITop</title>

  

</head>
<body>
    <main class="env">
        <div class="cubebeng" id="cubebeng">
            <div class="cube one">
                <div class="grid">
                </div>
            </div>
            <div class="cube two">
                <div class="grid">

                </div>
            </div>
            <div class="cube three">
                <div class="grid">

                </div>
            </div>
            <div class="cube four">
                <div class="grid">

                </div>
            </div>
            <div class="cube five">
                <div class="grid">

                </div>
            </div>
        </div>

    </main>
    <button id="randomizeButton">rrr</button>
    <button id="repair">pair</button>
    <button id="calculateSumButton">Calculate Sum of First Row</button>
    <button id="CalculateObj">cccc</button>


    <!-- steepestAscentHillClimbing -->
    <button id="startHillClimb">Run Hill Climbing</button>
    <div id="finalScore">Final Score: <span id="finalScoreValue">0</span></div>
    <div id="iterationCount">Iterations: <span id="iterationValue">0</span></div>
    <div id="duration">Duration: <span id="durationValue">0</span> seconds</div>
    <!-- grafik -->
    <canvas id="objectiveChart" width="400" height="200"></canvas>

  
  <div id="result">Sum of First Row: <span id="sumDisplay">0</span></div>
  <div id="result1">Sum of obj: <span id="sumObj">0</span></div>
    <script>
        const recubeNumbers = Array.from({ length: 125 }, (_, i) => i + 1);
        let randomArray = [...recubeNumbers]; 
        let cubeNumbers = [...recubeNumbers]; 
    
        // Fungsi untuk mengacak isi array
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }
    
      document.getElementById('calculateSumButton').addEventListener('click', () => {
      // Ambil nilai dari array cubeNumbers indeks 0 sampai 4 dan jumlahkan
      const firstRowSum = cubeNumbers[0] + cubeNumbers[1] + cubeNumbers[2] + cubeNumbers[3] + cubeNumbers[4];
      document.getElementById('sumDisplay').textContent = firstRowSum;
    });
      document.getElementById('CalculateObj').addEventListener('click', () => {
      const jawab = evaluate(cubeNumbers);
      document.getElementById('sumObj').textContent = jawab;
    });

        function renderNumbers() {
            let numberIndex = 0;
            document.querySelectorAll('.grid > div').forEach(drin => {
                const number = cubeNumbers[numberIndex]
                drin.querySelectorAll('div').forEach(face => {
                    face.textContent = number; 
                });
                numberIndex++;
            });
        }
    

        document.getElementById('randomizeButton').addEventListener('click', () => {
            shuffleArray(randomArray); 
            cubeNumbers = [...randomArray]; 
            renderNumbers(); 
        });
    
       
        document.getElementById('repair').addEventListener('click', () => {
            cubeNumbers = [...recubeNumbers]; 
            renderNumbers();
        });
    
        // Inisialisasi tampilan awal
        document.querySelectorAll('.grid').forEach(grid => {
            for (let i = 0; i < 25; i++) { 
                const drin = document.createElement('div'); 
                
                const faces = ['front', 'back', 'top', 'bottom', 'left', 'right'];
                faces.forEach(faceClass => {
                    const face = document.createElement('div');
                    face.classList.add(faceClass);
                    drin.appendChild(face);
                });
    
                grid.appendChild(drin); 
            }
        });
    
      
        // const cubebeng = document.querySelector('.cubebeng');
        // const env = document.querySelector('.env');
    
        // env.addEventListener('mousemove', (e) => {
        //     const { width, height, left, top } = env.getBoundingClientRect();
        //     const mouseX = e.clientX - left - width / 2;
        //     const mouseY = e.clientY - top - height / 2;
    
        //     const rotateY = (mouseX / width) * 800;
        //     const rotateX = -(mouseY / height) * 800;
    
        //     cubebeng.style.transform = `rotateX(${rotateX}deg) rotateY(${rotateY}deg)`;
        // });

        // STEEPEST ASCENT HILL CLIMBING 
        document.getElementById('startHillClimb').addEventListener('click', () => {
        const result = steepestAscentHillClimbing(cubeNumbers);

        // Tampilkan hasilnya
            document.getElementById('finalScoreValue').textContent = result.finalScore;
            document.getElementById('iterationValue').textContent = result.iteration;
            document.getElementById('durationValue').textContent = result.duration.toFixed(2);

            const ctx = document.getElementById('objectiveChart').getContext('2d');
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: result.scores.map((_, i) => i),
                    datasets: [{
                        label: 'Objective Function Value',
                        data: result.scores,
                        borderColor: 'rgba(75, 192, 192, 1)',
                        fill: false,
                    }]
                },
        options: {
            responsive: true,
            scales: {
                x: { title: { display: true, text: 'Iteration' } },
                y: { title: { display: true, text: 'Objective Value' } }
            }
        }
    });

            console.log("State Awal:", cubeNumbers);
            console.log("State Akhir:", result.finalState);
            console.log("Nilai Objective Function Akhir:", result.finalScore);
            console.log("Durasi Pencarian:", result.duration, "detik");
            console.log("Jumlah Iterasi:", result.iteration);
    });

    
    </script>


    <script src="cursorgrab.js"></script>
    <script src="objectiveFunc.js"></script>
    <script src="steepestHillClimbing.js"></script>

</body>
</html>